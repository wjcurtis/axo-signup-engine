<!doctype html>

<html lang="en">

<head>

<meta charset="utf-8"/>

<meta name="viewport" content="width=device-width,initial-scale=1"/>

<title>AXO â€” XRPL Signup & Referral Engine</title>

<style>

:root{--bg:#0f172a;--panel:#111827;--text:#e5e7eb;--muted:#94a3b8;--accent:#2563eb;--panelBorder:#1f2937}

*{box-sizing:border-box}

html,body{height:100%}

body{margin:0;background:radial-gradient(1200px 600px at 50% -10%,#33415533,transparent),var(--bg);color:var(--text);font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial}



/* Top bar with theme + admin buttons */

.topbar{position:fixed;top:12px;left:12px;right:12px;display:flex;justify-content:space-between;z-index:10}

.iconbtn{border:1px solid #e5e7eb;padding:8px 12px;border-radius:14px;cursor:pointer;background:#ffffff;color:#111827;box-shadow:0 2px 6px #0003}

.iconbtn:hover{transform:translateY(-1px)}



.wrap{max-width:880px;margin:80px auto 40px;padding:0 16px}

h1{margin:10px 0 4px;font-size:64px;line-height:1;text-align:center}

.sub{margin:0 0 16px;text-align:center;color:var(--muted);font-size:16px;letter-spacing:.12em;font-weight:700}

.card{background:var(--panel);border:1px solid var(--panelBorder);border-radius:14px;padding:18px;box-shadow:0 12px 30px #0007}

.section{border:1px dashed #2b3344;border-radius:12px;margin:12px 0;padding:14px}

.row{display:flex;gap:10px;align-items:center;justify-content:center}

.row input{flex:1;max-width:460px;padding:10px 12px;border-radius:10px;border:1px solid #374151;background:#0b1220;color:#e5e7eb;outline:none}

button{padding:10px 14px;border-radius:10px;border:1px solid #2a3a6a;background:#101936;color:#cbd5e1;cursor:pointer}

.primary{background:linear-gradient(180deg,#3b82f6,#2563eb);border-color:#2b50a8;color:#fff}

.note{color:#94a3b8;font-size:12px;margin-left:8px}

.kv{display:flex;gap:6px;align-items:center;justify-content:center;margin-top:6px;font-size:12px;color:#a5b4fc}

.center{display:flex;justify-content:center}

.small{font-size:12px;color:#94a3b8}

a{color:#93c5fd}



/* Light theme adjustments */

.light body,.light{background:#ffffff;color:#111827}

.light .card{background:#f7f7fb;border-color:#e5e7eb}

.light .row input{background:#ffffff;color:#111827;border-color:#d1d5db}

</style>

</head>

<body id="root">

  <!-- Top bar -->

  <div class="topbar">

    <button class="iconbtn" id="themeBtn" title="Toggle theme">ðŸŒ—</button>

    <button class="iconbtn" id="adminBtn" title="Admin">ðŸš€</button>

  </div>



  <div class="wrap">

    <h1>AXO</h1>

    <div class="sub">XRPL Signup & Referral Engine</div>



    <div class="card">

      <!-- Wallet help -->

      <div class="section">

        <div class="row"><strong>Donâ€™t have a wallet?</strong></div>

        <div class="row" style="margin-top:8px">

          <button onclick="window.open('https://xumm.app','_blank')">Get XUMM Wallet</button>

          <button onclick="window.open('https://play.google.com/store/apps/details?id=com.xrpllabs.xumm','_blank')">Android</button>

          <!-- fixed App Store id -->

          <button onclick="window.open('https://apps.apple.com/app/xumm/id1493203234','_blank')">iOS</button>

        </div>

        <div class="row"><span class="note">Install XUMM, create a wallet, then return here.</span></div>

      </div>



      <!-- 1. Connect -->

      <div class="section">

        <div class="row"><strong>1. Connect XUMM Wallet</strong></div>

        <div class="row" style="margin-top:8px">

          <input id="addr" placeholder="Enter your XRPL r-address (r...)">

          <button id="verifyBtn">Verify</button>

        </div>

        <div class="row"><span class="note">Weâ€™ll verify your wallet and prepare your bonus.</span></div>

      </div>



      <!-- 2. Trustline -->

      <div class="section">

        <div class="row"><strong>2. Set AXO Trust Line</strong> <span class="note">Required before claiming bonus.</span></div>

        <div class="row" style="margin-top:8px"><button id="openXummBtn">Open in XUMM</button></div>

        <div class="row"><span class="small">Tip: Doing steps 2â€“4 together saves a second network fee.</span></div>

      </div>



      <!-- 3. Claim -->

      <div class="section">

        <div class="row"><strong>3. Claim Signup Bonus</strong></div>

        <div class="row" style="margin-top:8px">

          <input id="ref" placeholder="Referral code (optional â€” râ€‘addr)">

          <button class="primary" id="claimBtn">Claim 1000 AXO</button>

        </div>

        <div class="row"><span class="note">Referral reward: 300 AXO (auto when referral is valid).</span></div>

      </div>



      <!-- 4. Buy -->

      <div class="section">

        <div class="row"><strong>4. Purchase AXO with XRP (optional)</strong></div>

        <div class="row" style="margin-top:8px"><button id="buyBtn">Open Purchase Flow</button></div>

        <div class="row"><span class="small">Completing with step 3 may reduce total fees.</span></div>

      </div>



      <!-- Email capture -->

      <div class="section">

        <div class="row"><strong>Get updates by email</strong></div>

        <div class="row" style="margin-top:8px">

          <input id="subEmail" type="email" placeholder="you@example.com">

          <button id="subBtn">Subscribe</button>

        </div>

        <div class="row"><span id="subMsg" class="small"></span></div>

      </div>



      <!-- Market -->

      <div class="section">

        <div class="row"><strong>Live Market Data</strong></div>

        <div class="row" style="margin-top:8px">

          <div id="m_axo" class="kv">AXO Price (USD): 0.0000</div>

          <div id="m_xrp" class="kv">XRP Price (USD): 0.0000</div>

          <div id="m_rate" class="kv">1 XRP = 0 AXO</div>

        </div>

        <div class="kv" id="m_src">source: â€”</div>

      </div>

    </div>

  </div>



<script>

(function(){

  // Theme toggle

  const root = document.getElementById('root');

  const themeBtn = document.getElementById('themeBtn');

  const saved = localStorage.getItem('theme');

  if(saved === 'light'){ root.classList.add('light'); }

  themeBtn.onclick = () => {

    root.classList.toggle('light');

    localStorage.setItem('theme', root.classList.contains('light') ? 'light' : 'dark');

  };



  // Admin button

  document.getElementById('adminBtn').onclick = () => { location.href = '/admin'; };



  // (Simple front-end gating placeholders)

  let verified=false, trustline=false;

  document.getElementById('verifyBtn').onclick = () => { verified = !!document.getElementById('addr').value.trim(); };

  document.getElementById('openXummBtn').onclick = () => { if(verified){ trustline=true; window.open('https://xumm.app','_blank'); } };

  document.getElementById('claimBtn').onclick = () => { if(!verified||!trustline){ alert('Please complete steps 1 and 2 first.'); } };



  // Subscribe

  document.getElementById('subBtn').onclick = async () => {

    const el = document.getElementById('subEmail');

    const msg = document.getElementById('subMsg');

    msg.textContent = 'Sending...';

    try{

      const r = await fetch('/api/subscribe', {

        method:'POST',

        headers:{'Content-Type':'application/json'},

        body: JSON.stringify({email: el.value.trim()})

      });

      const j = await r.json();

      msg.textContent = j.ok ? 'Thanks! Check your inbox.' : ('Error: ' + (j.error||'unknown'));

    }catch(e){ msg.textContent = 'Network error'; }

  };



  // Market data refresher

  async function refreshMarket(){

    try{

      const r = await fetch('/api/market', {cache:'no-store'});

      const j = await r.json();

      const axo = Number(j.axo_usd || 0).toFixed(4);

      const xrp = Number(j.xrp_usd || 0).toFixed(4);

      const rate = Number(j.axo_per_xrp || 0).toFixed(2);

      const ts = new Date((j.t||0)*1000).toLocaleTimeString();

      document.getElementById('m_axo').textContent = `AXO Price (USD): ${axo}`;

      document.getElementById('m_xrp').textContent = `XRP Price (USD): ${xrp}`;

      document.getElementById('m_rate').textContent = `1 XRP = ${rate} AXO`;

      document.getElementById('m_src').textContent  = `source: ${j.source} â€¢ ${ts}`;

    }catch(e){}

    setTimeout(refreshMarket, 60000);

  }

  refreshMarket();

})();

</script>

</body>

</html>